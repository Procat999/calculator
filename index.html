<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>System Emulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;600&family=Roboto:wght@300;400;500&display=swap');
        
        :root {
            --win-accent: #0078d4;
            --android-accent: #3ddc84;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            background: #000;
            color: white;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        /* --- ENTRY LAYER (IPHONE CALC) --- */
        #entry-layer {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            padding: 20px;
            justify-content: flex-end;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .iphone-btn {
            aspect-ratio: 1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            user-select: none;
            transition: filter 0.2s;
        }
        .iphone-btn:active { filter: brightness(1.5); }
        .iphone-btn.gray { background: #a5a5a5; color: black; }
        .iphone-btn.dark { background: #333333; color: white; }
        .iphone-btn.orange { background: #ff9f0a; color: white; }

        /* --- WINDOWS 11 EMULATOR --- */
        #win-emulator {
            display: none;
            width: 100vw;
            height: 100vh;
            background: url('https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=2874&auto=format&fit=crop') no-repeat center center;
            background-size: cover;
            position: relative;
        }

        .win-taskbar {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 48px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 10px;
            z-index: 100;
            border-top: 1px solid rgba(255,255,255,0.3);
        }

        .win-start-menu {
            position: absolute;
            bottom: 58px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            width: 520px;
            height: 600px;
            background: rgba(243, 243, 243, 0.85);
            backdrop-filter: blur(40px);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.4);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0, 0, 0.2, 1);
            padding: 30px;
            color: #111;
        }
        .win-start-menu.active { opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0); }

        /* --- ANDROID 16 EMULATOR --- */
        #android-emulator {
            display: none;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(180deg, #1a1c1e 0%, #000 100%);
            position: relative;
            flex-direction: column;
        }

        .android-pill {
            width: 120px;
            height: 5px;
            background: rgba(255,255,255,0.5);
            border-radius: 10px;
            margin-bottom: 8px;
            align-self: center;
        }

        .material-card {
            background: #2d2f31;
            border-radius: 28px;
            padding: 20px;
            margin: 10px;
        }

        /* --- SHARED STYLES --- */
        .hidden { display: none !important; }
        .fade-out { transform: translateY(-100%); }

        #secret-hub {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 2000;
            display: none;
            flex-direction: column;
        }
    </style>
</head>
<body>

    <!-- LAYER 1: IPHONE CALCULATOR ENTRY -->
    <div id="entry-layer">
        <div class="mb-8 px-4">
            <div id="entry-history" class="text-right text-zinc-500 text-xl h-8"></div>
            <div id="entry-display" class="text-right text-white text-8xl font-light truncate">0</div>
        </div>
        
        <div class="grid grid-cols-4 gap-4 mb-8">
            <div onclick="press('AC')" class="iphone-btn gray" id="ac-btn">AC</div>
            <div onclick="press('+/-')" class="iphone-btn gray">⁺/₋</div>
            <div onclick="press('%')" class="iphone-btn gray">%</div>
            <div onclick="press('/')" class="iphone-btn orange">÷</div>
            
            <div onclick="press('7')" class="iphone-btn dark">7</div>
            <div onclick="press('8')" class="iphone-btn dark">8</div>
            <div onclick="press('9')" class="iphone-btn dark">9</div>
            <div onclick="press('*')" class="iphone-btn orange">×</div>

            <div onclick="press('4')" class="iphone-btn dark">4</div>
            <div onclick="press('5')" class="iphone-btn dark">5</div>
            <div onclick="press('6')" class="iphone-btn dark">6</div>
            <div onclick="press('-')" class="iphone-btn orange">−</div>

            <div onclick="press('1')" class="iphone-btn dark">1</div>
            <div onclick="press('2')" class="iphone-btn dark">2</div>
            <div onclick="press('3')" class="iphone-btn dark">3</div>
            <div onclick="press('+')" class="iphone-btn orange">+</div>

            <div onclick="press('0')" class="iphone-btn dark col-span-2 !aspect-auto !rounded-full !justify-start pl-10">0</div>
            <div onclick="press('.')" class="iphone-btn dark">.</div>
            <div onclick="press('=')" class="iphone-btn orange">=</div>
        </div>
    </div>

    <!-- LAYER 2: WINDOWS 11 -->
    <div id="win-emulator">
        <div class="p-8 grid grid-cols-1 w-24 gap-6">
            <div class="flex flex-col items-center gap-1 cursor-pointer group" onclick="launchApp('calculator')">
                <div class="w-12 h-12 bg-white/10 backdrop-blur rounded flex items-center justify-center group-hover:bg-white/20 transition-all shadow-lg">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/2/23/Windows_Calculator_icon.png" class="w-8 h-8">
                </div>
                <span class="text-[11px] text-shadow">Calculator</span>
            </div>
        </div>

        <div id="win-start-menu" class="win-start-menu">
            <div class="flex justify-between items-center mb-6">
                <span class="font-semibold text-sm">Pinned</span>
                <button class="bg-white px-3 py-1 rounded text-xs shadow-sm border border-black/5">All apps ></button>
            </div>
            <div class="grid grid-cols-6 gap-y-8">
                <div class="flex flex-col items-center gap-2">
                    <div class="w-10 h-10 bg-blue-500 rounded flex items-center justify-center text-white"><i data-lucide="shield"></i></div>
                    <span class="text-[11px]">Vault</span>
                </div>
                <div class="flex flex-col items-center gap-2">
                    <div class="w-10 h-10 bg-green-500 rounded flex items-center justify-center text-white"><i data-lucide="gamepad-2"></i></div>
                    <span class="text-[11px]">Games</span>
                </div>
            </div>
        </div>

        <div class="win-taskbar">
            <div class="flex gap-2 items-center">
                <img src="https://upload.wikimedia.org/wikipedia/commons/archive/8/87/20211103131742%21Windows_logo_-_2021.svg" class="w-6 h-6 hover:scale-110 transition-transform cursor-pointer" onclick="toggleStart()">
                <div class="w-10 h-10 flex items-center justify-center hover:bg-black/5 rounded cursor-pointer"><i data-lucide="search" class="text-zinc-700 w-5 h-5"></i></div>
            </div>
            <div class="absolute right-4 flex items-center gap-4 text-zinc-800 text-xs font-medium">
                <div class="flex flex-col items-end">
                    <span id="win-time">12:00 PM</span>
                    <span id="win-date">1/21/2026</span>
                </div>
                <i data-lucide="message-square" class="w-4 h-4"></i>
            </div>
        </div>
    </div>

    <!-- LAYER 2: ANDROID 16 -->
    <div id="android-emulator">
        <div class="flex justify-between p-4 px-8 text-sm font-medium">
            <span id="android-time">12:00</span>
            <div class="flex gap-2 items-center">
                <i data-lucide="signal" class="w-4 h-4"></i>
                <i data-lucide="wifi" class="w-4 h-4"></i>
                <i data-lucide="battery" class="w-4 h-4"></i>
            </div>
        </div>

        <div class="flex-grow p-6">
            <div class="bg-white/10 backdrop-blur-xl rounded-[40px] p-6 mb-8 flex items-center gap-4">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center text-black shadow-xl">
                    <i data-lucide="search"></i>
                </div>
                <span class="text-white/60">Search apps...</span>
            </div>

            <div class="grid grid-cols-4 gap-y-10">
                <div class="flex flex-col items-center gap-2" onclick="launchApp('calculator')">
                    <div class="w-16 h-16 bg-[#3ddc84] rounded-[22px] flex items-center justify-center text-white shadow-lg">
                        <i data-lucide="calculator" class="w-8 h-8"></i>
                    </div>
                    <span class="text-xs">Calculator</span>
                </div>
                <div class="flex flex-col items-center gap-2 opacity-50">
                    <div class="w-16 h-16 bg-blue-400 rounded-[22px] flex items-center justify-center text-white shadow-lg">
                        <i data-lucide="message-circle" class="w-8 h-8"></i>
                    </div>
                    <span class="text-xs">Messages</span>
                </div>
            </div>
        </div>

        <div class="android-pill mb-4"></div>
    </div>

    <!-- OVERLAY: SECRET HUB -->
    <div id="secret-hub">
        <div class="p-6 border-b border-white/10 flex justify-between items-center">
            <h2 class="text-xl font-bold tracking-tighter">ENCRYPTED_OS_V4</h2>
            <button onclick="panic()" class="bg-red-500 text-white px-4 py-1 rounded-full text-xs font-bold">PANIC</button>
        </div>
        <div class="p-8 grid grid-cols-2 gap-4">
            <div class="aspect-square bg-zinc-900 rounded-3xl flex flex-col items-center justify-center border border-white/5 hover:border-green-500/50 cursor-pointer">
                <i data-lucide="ghost" class="w-10 h-10 mb-2 text-green-500"></i>
                <span class="text-[10px] uppercase font-bold tracking-widest text-white/40">Hidden Files</span>
            </div>
            <div class="aspect-square bg-zinc-900 rounded-3xl flex flex-col items-center justify-center border border-white/5 hover:border-green-500/50 cursor-pointer">
                <i data-lucide="terminal" class="w-10 h-10 mb-2 text-green-500"></i>
                <span class="text-[10px] uppercase font-bold tracking-widest text-white/40">Proxy Web</span>
            </div>
        </div>
    </div>

    <script>
        let calcVal = "0";
        let calcPrev = null;
        let calcOp = null;
        let calcWait = false;
        let lastAcTap = 0;
        let isSecretActive = false;

        function refreshIcons() {
            if (window.lucide) window.lucide.createIcons();
        }

        // --- CORE LOGIC ---
        function press(key) {
            const display = document.getElementById('entry-display');
            const history = document.getElementById('entry-history');

            if (key === 'AC') {
                const now = Date.now();
                if (now - lastAcTap < 300) { panic(); return; }
                lastAcTap = now;
                calcVal = "0"; calcPrev = null; calcOp = null; calcWait = false;
            } else if (!isNaN(key) || key === '.') {
                if (calcWait) { calcVal = key; calcWait = false; }
                else { calcVal = calcVal === "0" ? key : calcVal + key; }
            } else if (['+', '-', '*', '/'].includes(key)) {
                calcPrev = parseFloat(calcVal);
                calcOp = key;
                calcWait = true;
            } else if (key === '=') {
                const current = parseFloat(calcVal);
                if (calcPrev === 776 && calcOp === '*' && current === 228) {
                    launchEmulator();
                    return;
                }
                if (calcOp) {
                    let res = 0;
                    if (calcOp === '+') res = calcPrev + current;
                    if (calcOp === '-') res = calcPrev - current;
                    if (calcOp === '*') res = calcPrev * current;
                    if (calcOp === '/') res = calcPrev / current;
                    calcVal = String(res);
                    calcOp = null;
                }
            }
            display.innerText = calcVal;
            history.innerText = calcOp ? `${calcPrev} ${calcOp}` : '';
        }

        function launchEmulator() {
            const isMobile = /Android|iPhone|iPad/i.test(navigator.userAgent) || window.innerWidth < 768;
            document.getElementById('entry-layer').classList.add('fade-out');
            
            setTimeout(() => {
                document.getElementById('entry-layer').classList.add('hidden');
                if (isMobile) {
                    document.getElementById('android-emulator').style.display = 'flex';
                } else {
                    document.getElementById('win-emulator').style.display = 'block';
                }
                isSecretActive = true;
                refreshIcons();
            }, 600);
        }

        function panic() {
            isSecretActive = false;
            document.getElementById('secret-hub').style.display = 'none';
            document.getElementById('win-emulator').style.display = 'none';
            document.getElementById('android-emulator').style.display = 'none';
            
            const entry = document.getElementById('entry-layer');
            entry.classList.remove('hidden');
            setTimeout(() => {
                entry.classList.remove('fade-out');
                calcVal = "0";
                document.getElementById('entry-display').innerText = "0";
                document.getElementById('entry-history').innerText = "";
            }, 10);
        }

        function launchApp(id) {
            if (id === 'calculator') {
                document.getElementById('secret-hub').style.display = 'flex';
                refreshIcons();
            }
        }

        // --- WINDOWS UI HELPERS ---
        function toggleStart() {
            document.getElementById('win-start-menu').classList.toggle('active');
        }

        function updateClocks() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const dateStr = now.toLocaleDateString();
            
            if (document.getElementById('win-time')) {
                document.getElementById('win-time').innerText = timeStr;
                document.getElementById('win-date').innerText = dateStr;
            }
            if (document.getElementById('android-time')) {
                document.getElementById('android-time').innerText = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false });
            }
            setTimeout(updateClocks, 1000);
        }

        window.onload = () => {
            updateClocks();
            refreshIcons();
        };

        // Close start menu if clicking desktop
        window.addEventListener('click', (e) => {
            const start = document.getElementById('win-start-menu');
            if (start && start.classList.contains('active') && !e.target.closest('.win-taskbar') && !e.target.closest('.win-start-menu')) {
                start.classList.remove('active');
            }
        });
    </script>
</body>
</html>
